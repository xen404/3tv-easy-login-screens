import smoothscroll from 'smoothscroll-polyfill'

window.addEventListener('load', () => {
  smoothscroll.polyfill()
  const hasReducedMotionEnabled = () => window.matchMedia('(prefers-reduced-motion: reduce)').matches
  if (!hasReducedMotionEnabled()) {
    const linksWithHash = [...document.querySelectorAll('a[href*="#"]:not([href="#"])')]
      .filter((a) => a.pathname === window.location.pathname)
    linksWithHash.forEach((a) => {
      a.addEventListener('click', () => {
        document.querySelector(a.hash).scrollIntoView({
          behavior: 'smooth'
        })
      })
    })
  }
})
